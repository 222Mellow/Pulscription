<section
  class="events-wrapper">

  <div class="events-header">
    <h2>Recent Activity</h2>

    <ng-select
      [items]="txFilters"
      [clearable]="false"
      [searchable]="false"
      bindValue="value"
      bindLabel="label"
      [(ngModel)]="_activeTxFilter"
      (change)="setActiveTxFilter($event)">
    </ng-select>
  </div>

  <div class="events-items">
    @for (event of ((events$ | async)); track trackByFn($index, event)) {
      <a
        [routerLink]="['/details', event.phunkId]"
        [href]="'/details/' + event.phunkId"
        class="event-item"
        [class]="event.type | lowercase">

        <div class="image-wrapper">
          <img
            [lazyLoad]="dataSvc.staticUrl + '/images/phunk' + (event.phunkId | tokenIdParse) + '.svg'"
            [defaultImage]="'assets/loadingphunk.png'"
            width="160"
            height="160"
          />
        </div>

        <div class="labels-wrapper">

          <div class="token-id">#{{ event.phunkId }}</div>

          <div class="label">
            <div>{{ labels[event.type] }}</div>

            @if (event.to && event.type === 'transfer') {
              <app-wallet-address
                [address]="event.to">
              </app-wallet-address>
            }

            <!-- @if (event.from && event.type === 'sale') {
              Bought for Ξ{{ event.value | weiToEth }}
              ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
            } -->

            <!-- @if (event.from && event.type === 'sale') {
              Bought for Ξ{{ event.value | weiToEth }}
              ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
            } -->

            @if (event.value !== '0') {
              <span class="value">
                Ξ{{ event.value | weiToEth }}
                ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
              </span>
            }

            <!-- <ng-container *ngIf="event.value !== '0'">
              Ξ{{ event.value | weiToEth }}
              ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
            </ng-container> -->

            <div class="date">
              {{ event.blockTimestamp | timeago : true }}
            </div>
          </div>
        </div>
      </a>
    } @empty {
      @for (i of [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]; track i) {
        <span class="event-item">
          <div class="image-wrapper placeholder">
            <img
              [lazyLoad]="'assets/loadingphunk.png'"
              [defaultImage]="'assets/loadingphunk.png'"
              width="160"
              height="160"
            />
          </div>
        </span>
      }
    }
  </div>
</section>
