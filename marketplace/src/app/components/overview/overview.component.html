@if ((events$ | async); as recent) {
<section
  class="events-wrapper"
 >

  <div class="events-header">
    <h2>Recent Transactions</h2>

    <ng-select
      [items]="txFilters"
      [clearable]="false"
      [searchable]="false"
      bindValue="value"
      bindLabel="label"
      [(ngModel)]="_activeTxFilter"
      (change)="setActiveTxFilter($event)">
    </ng-select>
  </div>

  <div class="events-items">
    @for (event of recent; track trackByFn($index, event)) {
  <a
      [routerLink]="['/details', event.phunkId]"
      [href]="'/details/' + event.phunkId"
      class="event-item"
      [class]="event.type | lowercase"
     >

      <div class="image-wrapper">
        <img
          [lazyLoad]="dataSvc.staticUrl + '/images/phunk' + (event.phunkId | tokenIdParse) + '.svg'"
          [defaultImage]="'assets/loadingphunk.png'"
          width="160"
          height="160"
        />
      </div>

      <div class="labels-wrapper">

        <div class="token-id">#{{ event.phunkId }}</div>

        <div class="label">
          <ng-container>

            @if (event.to && event.type === 'transfer') {

              {{ labels[event.type] }}
              <app-wallet-address
                [address]="event.to">
              </app-wallet-address>
            
}

            @if (event.from && event.type === 'sale') {

              Bought for Ξ{{ event.value | weiToEth }}
              ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
            
}

            <!-- <ng-container *ngIf="event.value !== '0'">
              Ξ{{ event.value | weiToEth }}
              ({{ ((event.value | weiToEth) * (+event.usd || (dataSvc.usd$ | async) || 0)) | currency }})
            </ng-container> -->
          </ng-container>

          <div class="date">
            {{ event.blockTimestamp | timeago : true }}
          </div>
        </div>
      </div>
    </a>
}
  </div>
</section>
} @else {

  <section class="events-wrapper">
    <h2>Recent Transactions</h2>
    <div class="events-items">
      @for (i of [1,1,1,1,1,1,]; track i) {
  <div class="event-item">
        <div class="image-wrapper placeholder">
          <img
            [lazyLoad]="'assets/loadingphunk.png'"
            [defaultImage]="'assets/loadingphunk.png'"
            width="160"
            height="160"
          />
        </div>

        <div class="labels-wrapper">
          <div class="token-id">#0000</div>
          <div class="label">Loading...<br />&nbsp;</div>
          <div class="date">&nbsp;</div>
        </div>
      </div>
}
    </div>
  </section>

}

<ng-template #topSalesPlaceholder>
  <section class="sales-wrapper">
    <h2>Largest Sales</h2>
    <div class="sales-items">
      @for (i of [1,1,1,1,1,1]; track i) {
  <div class="sales-item">
        <div class="image-wrapper placeholder">
          <img
            [lazyLoad]="'assets/loadingphunk.png'"
            [defaultImage]="'assets/loadingphunk.png'"
            width="160"
            height="160"
          />
        </div>

        <div class="labels-wrapper">
          <div class="token-id">#0000</div>
          <div class="label">Loading...<br />&nbsp;</div>
        </div>
      </div>
}
    </div>
  </section>
</ng-template>

